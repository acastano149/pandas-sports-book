# Visualizaci√≥n de Datos con Matplotlib

Este cap√≠tulo cubre los fundamentos de visualizaci√≥n con matplotlib.

```{pyodide}
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

# ============================================
# DATOS ENRIQUECIDOS PARA VISUALIZACI√ìN
# ============================================
atletas = pd.DataFrame({
    'Nombre': ['Garc√≠a', 'L√≥pez', 'Mart√≠nez', 'S√°nchez', 'Fern√°ndez', 
               'Gonz√°lez', 'Rodr√≠guez', 'P√©rez', 'G√≥mez', 'Ruiz',
               'D√≠az', 'Moreno', '√Ålvarez'],
    'Posicion': ['Delantero', 'Mediocentro', 'Defensa', 'Portero', 'Delantero',
                'Mediocentro', 'Defensa', 'Delantero', 'Mediocentro', 'Defensa',
                'Portero', 'Extremo', 'Mediocentro'],
    'Edad': [25, 28, 23, 31, 22, 27, 29, 24, 26, 30, 33, 21, 25],
    'VO2max': [58.5, 62.1, 55.0, 48.2, 60.5, 59.0, 54.5, 61.0, 57.5, 53.0, 46.0, 63.0, 58.0],
    'VelocidadMax_kmh': [32.5, 31.0, 30.2, 28.5, 33.8, 31.5, 29.8, 34.2, 30.5, 29.0, 27.5, 35.0, 31.2],
    'Potencia_W': [850, 780, 920, 950, 720, 810, 890, 700, 790, 880, 920, 680, 800],
    'SaltoCMJ_cm': [42, 38, 45, 48, 40, 41, 44, 39, 40, 43, 46, 37, 41]
})

print("‚úÖ Datos de atletas cargados:", atletas.shape)
```

***

## 1. Gr√°ficos B√°sicos

### Ejemplo 1.1: Histograma

**En R:** `ggplot(aes(x = VO2max)) + geom_histogram()`

```{pyodide}
plt.figure(figsize=(8, 4))
atletas['VO2max'].hist(bins=8, edgecolor='black', color='steelblue')
plt.xlabel('VO2max')
plt.ylabel('Frecuencia')
plt.title('Distribuci√≥n de VO2max')
plt.show()
```

### Ejemplo 1.2: Gr√°fico de barras

**En R:** `ggplot(aes(x = Posicion)) + geom_bar()`

```{pyodide}
plt.figure(figsize=(8, 4))
atletas['Posicion'].value_counts().plot(kind='bar', edgecolor='black', color='coral')
plt.xlabel('Posici√≥n')
plt.ylabel('Conteo')
plt.title('Jugadores por Posici√≥n')
plt.xticks(rotation=45)
plt.tight_layout()
plt.show()
```

### Ejemplo 1.3: Scatter plot

**En R:** `ggplot(aes(x = Edad, y = VO2max)) + geom_point()`

```{pyodide}
plt.figure(figsize=(8, 5))
plt.scatter(atletas['Edad'], atletas['VO2max'], s=100, alpha=0.7, c='teal')
plt.xlabel('Edad')
plt.ylabel('VO2max')
plt.title('Edad vs VO2max')
plt.show()
```

---

### üß† Pr√°ctica 1.1

Crea un histograma de la columna 'Edad' con 6 bins.

```{pyodide}
# Pista: plt.figure() + atletas['Edad'].hist(bins=6) + plt.show()

# Escribe tu c√≥digo aqu√≠:


```

::: {.callout-tip collapse="true"}
## Ver soluci√≥n
```python
plt.figure(figsize=(7, 4))
atletas['Edad'].hist(bins=6, edgecolor='black', color='skyblue')
plt.xlabel('Edad')
plt.title('Distribuci√≥n de Edades')
plt.show()
```
:::

***

## 2. M√∫ltiples Gr√°ficos

### Ejemplo 2.1: Subplots

```{pyodide}
fig, axes = plt.subplots(1, 2, figsize=(12, 4))

# Gr√°fico 1
axes[0].hist(atletas['Edad'], bins=6, edgecolor='black', color='steelblue')
axes[0].set_title('Distribuci√≥n de Edad')

# Gr√°fico 2
axes[1].scatter(atletas['Edad'], atletas['VO2max'], color='coral', s=80)
axes[1].set_title('Edad vs VO2max')

plt.tight_layout()
plt.show()
```

---

### üß† Pr√°ctica 2.1

Crea una figura con 2 subplots: un histograma de VO2max y un bar plot de Posicion.

```{pyodide}
# Pista: fig, axes = plt.subplots(1, 2, figsize=(12, 4))

# Escribe tu c√≥digo aqu√≠:


```

::: {.callout-tip collapse="true"}
## Ver soluci√≥n
```python
fig, axes = plt.subplots(1, 2, figsize=(12, 4))
atletas['VO2max'].hist(ax=axes[0], bins=6, edgecolor='black')
axes[0].set_title('VO2max')
atletas['Posicion'].value_counts().plot(kind='bar', ax=axes[1], edgecolor='black')
axes[1].set_title('Posiciones')
plt.tight_layout()
plt.show()
```
:::

***

## üèÜ Mini-Proyecto: Perfil Visual del Plantel

### Pregunta 1: Relaci√≥n Velocidad vs Potencia
Crea un scatter plot de VelocidadMax_kmh vs Potencia_W. ¬øLos m√°s r√°pidos son los m√°s potentes?

```{pyodide}
# Pista: plt.scatter(x, y)

# Escribe tu c√≥digo aqu√≠:


```

::: {.callout-tip collapse="true"}
## Ver soluci√≥n
```python
plt.figure(figsize=(9, 6))
plt.scatter(atletas['Potencia_W'], atletas['VelocidadMax_kmh'], 
            s=100, c='steelblue', alpha=0.7, edgecolors='white')
plt.xlabel('Potencia (W)')
plt.ylabel('Velocidad M√°xima (km/h)')
plt.title('Relaci√≥n Potencia-Velocidad')
plt.grid(True, alpha=0.3)
plt.show()
# No necesariamente: la potencia es fuerza, velocidad depende tambi√©n de peso y t√©cnica
```
:::

### Pregunta 2: Ranking de Velocidad por Jugador
Crea un gr√°fico de barras horizontal mostrando la velocidad m√°xima de cada atleta, ordenado de mayor a menor.

```{pyodide}
# Pista: sort_values + barh

# Escribe tu c√≥digo aqu√≠:


```

::: {.callout-tip collapse="true"}
## Ver soluci√≥n
```python
plt.figure(figsize=(9, 7))
datos = atletas.sort_values('VelocidadMax_kmh')
colores = ['red' if v > 33 else 'steelblue' for v in datos['VelocidadMax_kmh']]
plt.barh(datos['Nombre'], datos['VelocidadMax_kmh'], color=colores, edgecolor='white')
plt.xlabel('Velocidad M√°xima (km/h)')
plt.axvline(33, color='red', linestyle='--', alpha=0.5, label='Umbral sprint (33 km/h)')
plt.legend()
plt.title('Ranking de Velocidad del Plantel')
plt.tight_layout()
plt.show()
```
:::

### Pregunta 3: Dashboard de Perfil F√≠sico por Posici√≥n
Crea 2 subplots: (1) VO2max medio por posici√≥n, (2) Velocidad m√°xima media por posici√≥n.

```{pyodide}
# Pista: fig, axes = plt.subplots(1, 2)

# Escribe tu c√≥digo aqu√≠:


```

::: {.callout-tip collapse="true"}
## Ver soluci√≥n
```python
fig, axes = plt.subplots(1, 2, figsize=(14, 5))

# Subplot 1: VO2max por posici√≥n
atletas.groupby('Posicion')['VO2max'].mean().sort_values().plot(
    kind='barh', ax=axes[0], color='coral', edgecolor='white')
axes[0].set_xlabel('VO2max medio')
axes[0].set_title('Capacidad Aer√≥bica por Posici√≥n')

# Subplot 2: Velocidad por posici√≥n
atletas.groupby('Posicion')['VelocidadMax_kmh'].mean().sort_values().plot(
    kind='barh', ax=axes[1], color='teal', edgecolor='white')
axes[1].set_xlabel('Velocidad m√°xima media (km/h)')
axes[1].set_title('Velocidad por Posici√≥n')

plt.tight_layout()
plt.show()
```
:::

### Pregunta 4: Distribuci√≥n de Salto CMJ con Percentiles
Crea un histograma del salto CMJ con l√≠neas verticales en los percentiles 25, 50 y 75.

```{pyodide}
# Pista: atletas['SaltoCMJ_cm'].quantile([0.25, 0.5, 0.75])

# Escribe tu c√≥digo aqu√≠:


```

::: {.callout-tip collapse="true"}
## Ver soluci√≥n
```python
plt.figure(figsize=(9, 5))
atletas['SaltoCMJ_cm'].hist(bins=8, edgecolor='black', color='lightgreen', alpha=0.7)

# Percentiles
p25, p50, p75 = atletas['SaltoCMJ_cm'].quantile([0.25, 0.5, 0.75])
plt.axvline(p25, color='orange', linestyle='--', label=f'P25: {p25:.0f} cm')
plt.axvline(p50, color='red', linestyle='-', label=f'P50: {p50:.0f} cm')
plt.axvline(p75, color='green', linestyle='--', label=f'P75: {p75:.0f} cm')

plt.xlabel('Salto CMJ (cm)')
plt.ylabel('Frecuencia')
plt.title('Distribuci√≥n del Salto Vertical')
plt.legend()
plt.tight_layout()
plt.show()
```
:::

---

## Resumen

| Tipo | R (ggplot2) | Python (matplotlib) |
|------|-------------|---------------------|
| Histograma | `geom_histogram()` | `df['col'].hist()` |
| Barras | `geom_col()` | `.plot(kind='bar')` |
| Scatter | `geom_point()` | `plt.scatter()` |
| Subplots | `patchwork` | `plt.subplots()` |
